var T=Object.defineProperty;var I=(u,t,s)=>t in u?T(u,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):u[t]=s;var Z=(u,t,s)=>(I(u,typeof t!="symbol"?t+"":t,s),s),G=(u,t,s)=>{if(!t.has(u))throw TypeError("Cannot "+s)};var e=(u,t,s)=>(G(u,t,"read from private field"),s?s.call(u):t.get(u)),h=(u,t,s)=>{if(t.has(u))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(u):t.set(u,s)},f=(u,t,s,i)=>(G(u,t,"write to private field"),i?i.call(u,s):t.set(u,s),s);var o=(u,t,s)=>(G(u,t,"access private method"),s);var A="is-active",L=["is-active","bg-primary","text-white"],E="data-value",k,d,p,b,c,r,w,y,j,l,U,l,M,l,S,l,P,l,Y,l,K,l,W,l,q,l,H,l,O,l,N,l,D,l,B,l,J,l,Q,l,R=class{constructor(t,s={}){h(this,j);h(this,U);h(this,M);h(this,S);h(this,P);h(this,Y);h(this,K);h(this,W);h(this,q);h(this,H);h(this,O);h(this,N);h(this,D);h(this,B);h(this,J);h(this,Q);h(this,k,void 0);h(this,d,void 0);h(this,p,void 0);h(this,b,void 0);h(this,c,void 0);h(this,r,void 0);h(this,w,void 0);h(this,y,void 0);t.style.display="none",t.dataset.tags=!0,f(this,d,t);let i=a=>["true","false","1","0",!0,!1].includes(a)&&!!JSON.parse(a),n={...s,...t.dataset};for(this.allowNew=n.allowNew?i(n.allowNew):!1,this.showAllSuggestions=n.showAllSuggestions?i(n.showAllSuggestions):!1,this.badgeStyle=n.badgeStyle||"primary",this.allowClear=n.allowClear?i(n.allowClear):!1,this.server=n.server||!1,this.liveServer=n.liveServer?i(n.liveServer):!1,this.suggestionsThreshold=n.suggestionsThreshold?parseInt(n.suggestionsThreshold):1,this.validationRegex=n.regex||"",this.separator=n.separator?n.separator.split("|"):[],this.max=n.max?parseInt(n.max):null,this.clearLabel=n.clearLabel||"Clear",this.searchLabel=n.searchLabel||"Type a value",t.hasAttribute("multiple")||(this.max=1),this.placeholder=o(this,U,l).call(this),f(this,w,!1),f(this,y,!1),this.parentForm=t.parentElement;this.parentForm&&(this.parentForm=this.parentForm.parentElement,this.parentForm.nodeName!="FORM"););if(this.parentForm.addEventListener("reset",a=>{this.reset()}),f(this,p,document.createElement("div")),f(this,b,document.createElement("div")),f(this,c,document.createElement("ul")),f(this,r,document.createElement("input")),e(this,p).appendChild(e(this,b)),e(this,b).appendChild(e(this,r)),e(this,p).appendChild(e(this,c)),e(this,d).parentNode.insertBefore(e(this,p),e(this,d).nextSibling),o(this,Y,l).call(this),o(this,S,l).call(this),o(this,M,l).call(this),o(this,P,l).call(this),this.server&&!this.liveServer)o(this,j,l).call(this);else{let a=Array.from(e(this,d).querySelectorAll("option")).map(v=>({value:v.getAttribute("value"),label:v.innerText}));o(this,H,l).call(this,a)}}static init(t="select[multiple]",s={}){let i=document.querySelectorAll(t),n;for(let a=0;a<i.length;a++)i[a].dataset.tags||(n=new R(i[a],s),R.instances.set(i[a],n))}static getInstance(t){if(R.instances.has(t))return R.instances.get(t)}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY)}reset(){f(this,y,!1),this.removeAll();let t=e(this,d).querySelectorAll("option[data-init]");for(let s=0;s<t.length;s++){let i=t[s];this.addItem(i.innerText,i.value)}o(this,q,l).call(this),f(this,y,!0)}getSelectedValues(){let t=this.getSelectedOptions();return Array.from(t).map(s=>s.value)}getSelectedOptions(){return e(this,d).querySelectorAll("option[selected]")}getActiveSelection(){return e(this,c).querySelector("a."+A)}removeActiveSelection(){let t=this.getActiveSelection();t&&t.classList.remove(...L)}removeAll(){e(this,b).querySelectorAll("span").forEach(s=>{this.removeLastItem(!0)})}removeLastItem(t){t&&f(this,y,!1);let s=e(this,b).querySelectorAll("span");if(!s.length)return;let i=s[s.length-1];this.removeItem(i.getAttribute(E)),f(this,y,!0)}isDisabled(){return e(this,d).hasAttribute("disabled")||e(this,d).hasAttribute("readonly")}addItem(t,s=null,i={}){if(s||(s=t),this.max&&this.getSelectedValues().length>=this.max)if(this.max===1)this.removeLastItem(!0);else return!1;if(this.validationRegex&&!o(this,Q,l).call(this,t))return e(this,p).classList.add("is-invalid"),!1;let n=o(this,B,l).call(this),a=e(this,d).querySelector('option[value="'+s+'"]');a&&(i=a.dataset);let v=t,g=document.createElement("span"),m=["badge"],F=this.badgeStyle;if(i.badgeStyle&&(F=i.badgeStyle),i.badgeClass&&m.push(i.badgeClass),n===5?m=[...m,"me-2","bg-"+F]:m=[...m,"mr-2","badge-"+F],g.classList.add(...m),g.setAttribute(E,s),this.allowClear&&!this.isDisabled()&&(v=(n===5?'<button type="button" style="font-size:0.65em" class="me-2 btn-close btn-close-white" aria-label="'+this.clearLabel+'"></button>':'<button type="button" style="font-size:1em;float:left;text-shadow:none;color:currentColor;" class="mr-2 close" aria-label="'+this.clearLabel+'"><span aria-hidden="true">&times;</span></button>')+v),g.innerHTML=v,e(this,b).insertBefore(g,e(this,r)),this.allowClear&&!this.isDisabled()&&g.querySelector("button").addEventListener("click",x=>{x.preventDefault(),x.stopPropagation(),this.removeItem(s),document.activeElement.blur()}),!a){a=document.createElement("option"),a.value=s,a.innerText=t;for(let[x,z]of Object.entries(i))a.dataset[x]=z;e(this,d).appendChild(a)}return a.setAttribute("selected","selected"),a.selected=!0,e(this,y)&&e(this,d).dispatchEvent(new Event("change"),{bubbles:!0}),!0}removeItem(t){let s=e(this,b).querySelector("span["+E+'="'+t+'"]');if(!s)return;s.remove();let i=e(this,d).querySelector('option[value="'+t+'"]');i&&(i.removeAttribute("selected"),i.selected=!1,e(this,y)&&e(this,d).dispatchEvent(new Event("change"),{bubbles:!0})),e(this,r).style.visibility=="hidden"&&this.max&&this.getSelectedValues().length<this.max&&(e(this,r).style.visibility="visible")}},X=R;k=new WeakMap,d=new WeakMap,p=new WeakMap,b=new WeakMap,c=new WeakMap,r=new WeakMap,w=new WeakMap,y=new WeakMap,j=new WeakSet,l=function(t=!1){e(this,k)&&e(this,k).abort(),f(this,k,new AbortController),fetch(this.server+"?query="+encodeURIComponent(e(this,r).value),{signal:e(this,k).signal}).then(s=>s.json()).then(s=>{let i=s.data||s;o(this,H,l).call(this,i),f(this,k,null),t&&o(this,N,l).call(this)}).catch(s=>{s.name!=="AbortError"&&console.error(s)})},U=new WeakSet,l=function(){let t=e(this,d).querySelector("option");if(!!t){if(!t.value){let s=t.innerText;return t.remove(),s}return e(this,d).getAttribute("placeholder")?e(this,d).getAttribute("placeholder"):e(this,d).getAttribute("data-placeholder")?e(this,d).getAttribute("data-placeholder"):""}},M=new WeakSet,l=function(){e(this,c).classList.add("dropdown-menu","p-0"),e(this,c).style.maxHeight="280px",e(this,c).style.overflowY="auto",e(this,c).addEventListener("mouseenter",t=>{f(this,w,!1)})},S=new WeakSet,l=function(){e(this,p).classList.add("form-control","dropdown"),this.isDisabled()&&e(this,p).setAttribute("readonly",""),o(this,B,l).call(this)===4&&(e(this,p).style.height="auto")},P=new WeakSet,l=function(){e(this,b).addEventListener("click",s=>{this.isDisabled()||(e(this,r).style.visibility!="hidden"?e(this,r).focus():this.max===1&&o(this,N,l).call(this))});let t=e(this,d).querySelectorAll("option[selected]");for(let s=0;s<t.length;s++){let i=t[s];!i.value||(i.dataset.init=1,this.addItem(i.innerText,i.value))}},Y=new WeakSet,l=function(){e(this,r).type="text",e(this,r).autocomplete="off",e(this,r).style.backgroundColor="transparent",e(this,r).style.border=0,e(this,r).style.outline=0,e(this,r).style.maxWidth="100%",e(this,r).ariaLabel=this.searchLabel,this.isDisabled()&&e(this,r).setAttribute("disabled",""),o(this,q,l).call(this),e(this,r).addEventListener("input",t=>{o(this,q,l).call(this),e(this,r).value.length>=this.suggestionsThreshold?this.liveServer?o(this,j,l).call(this,!0):o(this,N,l).call(this):o(this,D,l).call(this)}),e(this,r).addEventListener("focus",t=>{e(this,r).value.length>=this.suggestionsThreshold&&o(this,N,l).call(this)}),e(this,r).addEventListener("focusout",t=>{o(this,D,l).call(this)}),e(this,r).addEventListener("keydown",t=>{let s=t.keyCode||t.key;if(this.separator.length&&this.separator.includes(t.key)){t.preventDefault(),this.addItem(e(this,r).value,null)&&o(this,O,l).call(this);return}switch(s){case 13:case"Enter":let i=this.getActiveSelection();i?i.click():this.allowNew&&!o(this,J,l).call(this,e(this,r).value)&&e(this,r).value&&this.addItem(e(this,r).value,null)&&o(this,O,l).call(this),t.preventDefault();break;case 38:case"ArrowUp":t.preventDefault(),f(this,w,!0);let n=o(this,K,l).call(this);e(this,r).value.length==0&&e(this,c).classList.contains("show")&&!n&&o(this,D,l).call(this);break;case 40:case"ArrowDown":t.preventDefault(),f(this,w,!0),o(this,W,l).call(this),e(this,r).value.length==0&&!e(this,c).classList.contains("show")&&o(this,N,l).call(this);break;case 8:case"Backspace":e(this,r).value.length==0&&(this.removeLastItem(),o(this,q,l).call(this),o(this,D,l).call(this));break}})},K=new WeakSet,l=function(){let t=this.getActiveSelection();if(t){let s=t.parentNode;do s=s.previousSibling;while(s&&s.style.display=="none");return s?(t.classList.remove(...L),s.querySelector("a").classList.add(...L),s.parentNode.scrollTop=s.offsetTop-s.parentNode.offsetTop,s):null}return null},W=new WeakSet,l=function(){let t=this.getActiveSelection(),s=null;if(t){s=t.parentNode;do s=s.nextSibling;while(s&&s.style.display=="none");return s?(t.classList.remove(...L),s.querySelector("a").classList.add(...L),s.offsetTop>s.parentNode.offsetHeight-s.offsetHeight&&(s.parentNode.scrollTop+=s.offsetHeight),s):null}return s},q=new WeakSet,l=function(){e(this,r).value?e(this,r).size=e(this,r).value.length+1:this.getSelectedValues().length?(e(this,r).placeholder="",e(this,r).size=1):(e(this,r).size=this.placeholder.length,e(this,r).placeholder=this.placeholder)},H=new WeakSet,l=function(t=null){for(;e(this,c).lastChild;)e(this,c).removeChild(e(this,c).lastChild);for(let s=0;s<t.length;s++){let i=t[s];if(!i.value)continue;let n=document.createElement("li"),a=document.createElement("a");if(n.append(a),a.classList.add("dropdown-item"),a.setAttribute(E,i.value),a.setAttribute("href","#"),a.innerText=i.label,i.data)for(let[v,g]of Object.entries(i.data))a.dataset[v]=g;e(this,c).appendChild(n),a.addEventListener("mouseenter",v=>{e(this,w)||(this.removeActiveSelection(),n.querySelector("a").classList.add(...L))}),a.addEventListener("mousemove",v=>{f(this,w,!1)}),a.addEventListener("mousedown",v=>{v.preventDefault()}),a.addEventListener("click",v=>{v.preventDefault(),this.addItem(a.innerText,a.getAttribute(E),a.dataset),o(this,O,l).call(this)})}},O=new WeakSet,l=function(){e(this,r).value="",o(this,q,l).call(this),o(this,D,l).call(this),this.max&&this.getSelectedValues().length===this.max?e(this,r).style.visibility="hidden":e(this,r).style.visibility=="hidden"&&(e(this,r).style.visibility="visible")},N=new WeakSet,l=function(){e(this,c).classList.contains("show")||e(this,c).classList.add("show"),e(this,c).style.left=e(this,r).offsetLeft+"px";let t=e(this,r).value.toLocaleLowerCase(),s=this.getSelectedValues(),i=e(this,c).querySelectorAll("li"),n=!1,a=null,v=!1;for(let g=0;g<i.length;g++){let m=i[g],F=m.innerText.toLocaleLowerCase(),x=m.querySelector("a");if(x.classList.remove(...L),s.indexOf(x.getAttribute(E))!=-1){m.style.display="none";continue}v=!0;let z=t.length===0||F.indexOf(t)!==-1;this.showAllSuggestions||this.suggestionsThreshold===0||z?(m.style.display="list-item",n=!0,!a&&z&&(a=m)):m.style.display="none"}n||e(this,c).classList.remove("show"),a?(e(this,p).classList.contains("is-invalid")&&e(this,p).classList.remove("is-invalid"),a.querySelector("a").classList.add(...L),a.parentNode.scrollTop=a.offsetTop-a.parentNode.offsetTop):!this.allowNew&&!(t.length===0&&!v)?e(this,p).classList.add("is-invalid"):this.validationRegex&&e(this,p).classList.contains("is-invalid")&&e(this,p).classList.remove("is-invalid")},D=new WeakSet,l=function(){e(this,c).classList.contains("show")&&e(this,c).classList.remove("show"),e(this,p).classList.contains("is-invalid")&&e(this,p).classList.remove("is-invalid")},B=new WeakSet,l=function(){let t=5;return window.jQuery&&$.fn.tooltip!=null&&$.fn.tooltip.Constructor!=null&&(t=parseInt($.fn.tooltip.Constructor.VERSION.charAt(0))),t},J=new WeakSet,l=function(t){let s=Array.from(e(this,d).querySelectorAll("option")).find(i=>i.textContent==t);return!!(s&&s.getAttribute("selected"))},Q=new WeakSet,l=function(t){return new RegExp(this.validationRegex.trim()).test(t)},Z(X,"instances",new Map);var _=X;export{_ as default};
//# sourceMappingURL=tags.min.js.map
