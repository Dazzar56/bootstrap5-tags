var I=Object.defineProperty;var A=(u,t,s)=>t in u?I(u,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):u[t]=s;var T=(u,t,s)=>(A(u,typeof t!="symbol"?t+"":t,s),s),Q=(u,t,s)=>{if(!t.has(u))throw TypeError("Cannot "+s)};var e=(u,t,s)=>(Q(u,t,"read from private field"),s?s.call(u):t.get(u)),h=(u,t,s)=>{if(t.has(u))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(u):t.set(u,s)},f=(u,t,s,i)=>(Q(u,t,"write to private field"),i?i.call(u,s):t.set(u,s),s);var o=(u,t,s)=>(Q(u,t,"access private method"),s);var V="is-active",L=["is-active","bg-primary","text-white"],E="data-value",G=new WeakMap,k,d,p,b,c,a,w,y,F,l,M,l,S,l,z,l,U,l,P,l,W,l,Y,l,q,l,j,l,O,l,N,l,D,l,H,l,K,l,J,l,Z=class{constructor(t,s={}){h(this,F);h(this,M);h(this,S);h(this,z);h(this,U);h(this,P);h(this,W);h(this,Y);h(this,q);h(this,j);h(this,O);h(this,N);h(this,D);h(this,H);h(this,K);h(this,J);h(this,k,void 0);h(this,d,void 0);h(this,p,void 0);h(this,b,void 0);h(this,c,void 0);h(this,a,void 0);h(this,w,void 0);h(this,y,void 0);t.style.display="none",t.dataset.tags=!0,f(this,d,t);let i=r=>["true","false","1","0",!0,!1].includes(r)&&!!JSON.parse(r),n={...s,...t.dataset};for(this.allowNew=n.allowNew?i(n.allowNew):!1,this.showAllSuggestions=n.showAllSuggestions?i(n.showAllSuggestions):!1,this.badgeStyle=n.badgeStyle||"primary",this.allowClear=n.allowClear?i(n.allowClear):!1,this.server=n.server||!1,this.liveServer=n.liveServer?i(n.liveServer):!1,this.suggestionsThreshold=n.suggestionsThreshold?parseInt(n.suggestionsThreshold):1,this.validationRegex=n.regex||"",this.separator=n.separator?n.separator.split("|"):[],this.max=n.max?parseInt(n.max):null,this.clearLabel=n.clearLabel||"Clear",this.searchLabel=n.searchLabel||"Type a value",t.hasAttribute("multiple")||(this.max=1),this.placeholder=o(this,M,l).call(this),f(this,w,!1),f(this,y,!1),this.parentForm=t.parentElement;this.parentForm&&(this.parentForm=this.parentForm.parentElement,this.parentForm.nodeName!="FORM"););if(this.parentForm.addEventListener("reset",r=>{this.reset()}),f(this,p,document.createElement("div")),f(this,b,document.createElement("div")),f(this,c,document.createElement("ul")),f(this,a,document.createElement("input")),e(this,p).appendChild(e(this,b)),e(this,b).appendChild(e(this,a)),e(this,p).appendChild(e(this,c)),e(this,d).parentNode.insertBefore(e(this,p),e(this,d).nextSibling),o(this,P,l).call(this),o(this,z,l).call(this),o(this,S,l).call(this),o(this,U,l).call(this),this.server&&!this.liveServer)o(this,F,l).call(this);else{let r=Array.from(e(this,d).querySelectorAll("option")).map(v=>({value:v.getAttribute("value"),label:v.innerText}));o(this,j,l).call(this,r)}}static init(t="select[multiple]",s={}){let i=document.querySelectorAll(t),n;for(let r=0;r<i.length;r++)i[r].dataset.tags||(n=new Z(i[r],s),G.set(i[r],n))}static getInstance(t){if(G.has(t))return G.get(t)}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY)}reset(){f(this,y,!1),this.removeAll();let t=e(this,d).querySelectorAll("option[data-init]");for(let s=0;s<t.length;s++){let i=t[s];this.addItem(i.innerText,i.value)}o(this,q,l).call(this),f(this,y,!0)}getSelectedValues(){let t=this.getSelectedOptions();return Array.from(t).map(s=>s.value)}getSelectedOptions(){return e(this,d).querySelectorAll("option[selected]")}getActiveSelection(){return e(this,c).querySelector("a."+V)}removeActiveSelection(){let t=this.getActiveSelection();t&&t.classList.remove(...L)}removeAll(){e(this,b).querySelectorAll("span").forEach(s=>{this.removeLastItem(!0)})}removeLastItem(t){t&&f(this,y,!1);let s=e(this,b).querySelectorAll("span");if(!s.length)return;let i=s[s.length-1];this.removeItem(i.getAttribute(E)),f(this,y,!0)}isDisabled(){return e(this,d).hasAttribute("disabled")||e(this,d).hasAttribute("readonly")}addItem(t,s=null,i={}){if(s||(s=t),this.max&&this.getSelectedValues().length>=this.max)if(this.max===1)this.removeLastItem(!0);else return!1;if(this.validationRegex&&!o(this,J,l).call(this,t))return e(this,p).classList.add("is-invalid"),!1;let n=o(this,H,l).call(this),r=e(this,d).querySelector('option[value="'+s+'"]');r&&(i=r.dataset);let v=t,g=document.createElement("span"),m=["badge"],R=this.badgeStyle;if(i.badgeStyle&&(R=i.badgeStyle),i.badgeClass&&m.push(i.badgeClass),n===5?m=[...m,"me-2","bg-"+R]:m=[...m,"mr-2","badge-"+R],g.classList.add(...m),g.setAttribute(E,s),this.allowClear&&!this.isDisabled()&&(v=(n===5?'<button type="button" style="font-size:0.65em" class="me-2 btn-close btn-close-white" aria-label="'+this.clearLabel+'"></button>':'<button type="button" style="font-size:1em;float:left;text-shadow:none;color:currentColor;" class="mr-2 close" aria-label="'+this.clearLabel+'"><span aria-hidden="true">&times;</span></button>')+v),g.innerHTML=v,e(this,b).insertBefore(g,e(this,a)),this.allowClear&&!this.isDisabled()&&g.querySelector("button").addEventListener("click",x=>{x.preventDefault(),x.stopPropagation(),this.removeItem(s),document.activeElement.blur()}),!r){r=document.createElement("option"),r.value=s,r.innerText=t;for(let[x,B]of Object.entries(i))r.dataset[x]=B;e(this,d).appendChild(r)}return r.setAttribute("selected","selected"),r.selected=!0,e(this,y)&&e(this,d).dispatchEvent(new Event("change"),{bubbles:!0}),!0}removeItem(t){let s=e(this,b).querySelector("span["+E+'="'+t+'"]');if(!s)return;s.remove();let i=e(this,d).querySelector('option[value="'+t+'"]');i&&(i.removeAttribute("selected"),i.selected=!1,e(this,y)&&e(this,d).dispatchEvent(new Event("change"),{bubbles:!0})),e(this,a).style.visibility=="hidden"&&this.max&&this.getSelectedValues().length<this.max&&(e(this,a).style.visibility="visible")}},X=Z;k=new WeakMap,d=new WeakMap,p=new WeakMap,b=new WeakMap,c=new WeakMap,a=new WeakMap,w=new WeakMap,y=new WeakMap,F=new WeakSet,l=function(t=!1){e(this,k)&&e(this,k).abort(),f(this,k,new AbortController),fetch(this.server+"?query="+encodeURIComponent(e(this,a).value),{signal:e(this,k).signal}).then(s=>s.json()).then(s=>{let i=s.data||s;o(this,j,l).call(this,i),f(this,k,null),t&&o(this,N,l).call(this)}).catch(s=>{s.name!=="AbortError"&&console.error(s)})},M=new WeakSet,l=function(){let t=e(this,d).querySelector("option");if(!!t){if(!t.value){let s=t.innerText;return t.remove(),s}return e(this,d).getAttribute("placeholder")?e(this,d).getAttribute("placeholder"):e(this,d).getAttribute("data-placeholder")?e(this,d).getAttribute("data-placeholder"):""}},S=new WeakSet,l=function(){e(this,c).classList.add("dropdown-menu","p-0"),e(this,c).style.maxHeight="280px",e(this,c).style.overflowY="auto",e(this,c).addEventListener("mouseenter",t=>{f(this,w,!1)})},z=new WeakSet,l=function(){e(this,p).classList.add("form-control","dropdown"),this.isDisabled()&&e(this,p).setAttribute("readonly",""),o(this,H,l).call(this)===4&&(e(this,p).style.height="auto")},U=new WeakSet,l=function(){e(this,b).addEventListener("click",s=>{this.isDisabled()||(e(this,a).style.visibility!="hidden"?e(this,a).focus():this.max===1&&o(this,N,l).call(this))});let t=e(this,d).querySelectorAll("option[selected]");for(let s=0;s<t.length;s++){let i=t[s];!i.value||(i.dataset.init=1,this.addItem(i.innerText,i.value))}},P=new WeakSet,l=function(){e(this,a).type="text",e(this,a).autocomplete="off",e(this,a).style.backgroundColor="transparent",e(this,a).style.border=0,e(this,a).style.outline=0,e(this,a).style.maxWidth="100%",e(this,a).ariaLabel=this.searchLabel,this.isDisabled()&&e(this,a).setAttribute("disabled",""),o(this,q,l).call(this),e(this,a).addEventListener("input",t=>{o(this,q,l).call(this),e(this,a).value.length>=this.suggestionsThreshold?this.liveServer?o(this,F,l).call(this,!0):o(this,N,l).call(this):o(this,D,l).call(this)}),e(this,a).addEventListener("focus",t=>{e(this,a).value.length>=this.suggestionsThreshold&&o(this,N,l).call(this)}),e(this,a).addEventListener("focusout",t=>{o(this,D,l).call(this)}),e(this,a).addEventListener("keydown",t=>{let s=t.keyCode||t.key;if(this.separator.length&&this.separator.includes(t.key)){t.preventDefault(),this.addItem(e(this,a).value,null)&&o(this,O,l).call(this);return}switch(s){case 13:case"Enter":t.preventDefault();let i=this.getActiveSelection();i?i.click():this.allowNew&&!o(this,K,l).call(this,e(this,a).value)&&e(this,a).value&&this.addItem(e(this,a).value,null)&&o(this,O,l).call(this);break;case 38:case"ArrowUp":t.preventDefault(),f(this,w,!0);let n=o(this,W,l).call(this);e(this,a).value.length==0&&e(this,c).classList.contains("show")&&!n&&o(this,D,l).call(this);break;case 40:case"ArrowDown":t.preventDefault(),f(this,w,!0),o(this,Y,l).call(this),e(this,a).value.length==0&&!e(this,c).classList.contains("show")&&o(this,N,l).call(this);break;case 8:case"Backspace":e(this,a).value.length==0&&(this.removeLastItem(),o(this,q,l).call(this),o(this,D,l).call(this));break}})},W=new WeakSet,l=function(){let t=this.getActiveSelection();if(t){let s=t.parentNode;do s=s.previousSibling;while(s&&s.style.display=="none");return s?(t.classList.remove(...L),s.querySelector("a").classList.add(...L),s.parentNode.scrollTop=s.offsetTop-s.parentNode.offsetTop,s):null}return null},Y=new WeakSet,l=function(){let t=this.getActiveSelection(),s=null;if(t){s=t.parentNode;do s=s.nextSibling;while(s&&s.style.display=="none");return s?(t.classList.remove(...L),s.querySelector("a").classList.add(...L),s.offsetTop>s.parentNode.offsetHeight-s.offsetHeight&&(s.parentNode.scrollTop+=s.offsetHeight),s):null}return s},q=new WeakSet,l=function(){e(this,a).value?e(this,a).size=e(this,a).value.length+1:this.getSelectedValues().length?(e(this,a).placeholder="",e(this,a).size=1):(e(this,a).size=this.placeholder.length,e(this,a).placeholder=this.placeholder)},j=new WeakSet,l=function(t=null){for(;e(this,c).lastChild;)e(this,c).removeChild(e(this,c).lastChild);for(let s=0;s<t.length;s++){let i=t[s];if(!i.value)continue;let n=document.createElement("li"),r=document.createElement("a");if(n.append(r),r.classList.add("dropdown-item"),r.setAttribute(E,i.value),r.setAttribute("href","#"),r.innerText=i.label,i.data)for(let[v,g]of Object.entries(i.data))r.dataset[v]=g;e(this,c).appendChild(n),r.addEventListener("mouseenter",v=>{e(this,w)||(this.removeActiveSelection(),n.querySelector("a").classList.add(...L))}),r.addEventListener("mousemove",v=>{f(this,w,!1)}),r.addEventListener("mousedown",v=>{v.preventDefault()}),r.addEventListener("click",v=>{v.preventDefault(),this.addItem(r.innerText,r.getAttribute(E),r.dataset),o(this,O,l).call(this)})}},O=new WeakSet,l=function(){e(this,a).value="",o(this,q,l).call(this),o(this,D,l).call(this),this.max&&this.getSelectedValues().length===this.max?e(this,a).style.visibility="hidden":e(this,a).style.visibility=="hidden"&&(e(this,a).style.visibility="visible")},N=new WeakSet,l=function(){e(this,c).classList.contains("show")||e(this,c).classList.add("show"),e(this,c).style.left=e(this,a).offsetLeft+"px";let t=e(this,a).value.toLocaleLowerCase(),s=this.getSelectedValues(),i=e(this,c).querySelectorAll("li"),n=!1,r=null,v=!1;for(let g=0;g<i.length;g++){let m=i[g],R=m.innerText.toLocaleLowerCase(),x=m.querySelector("a");if(x.classList.remove(...L),s.indexOf(x.getAttribute(E))!=-1){m.style.display="none";continue}v=!0;let B=t.length===0||R.indexOf(t)!==-1;this.showAllSuggestions||this.suggestionsThreshold===0||B?(m.style.display="list-item",n=!0,!r&&B&&(r=m)):m.style.display="none"}n||e(this,c).classList.remove("show"),r?(e(this,p).classList.contains("is-invalid")&&e(this,p).classList.remove("is-invalid"),r.querySelector("a").classList.add(...L),r.parentNode.scrollTop=r.offsetTop-r.parentNode.offsetTop):!this.allowNew&&!(t.length===0&&!v)?e(this,p).classList.add("is-invalid"):this.validationRegex&&e(this,p).classList.contains("is-invalid")&&e(this,p).classList.remove("is-invalid")},D=new WeakSet,l=function(){e(this,c).classList.contains("show")&&e(this,c).classList.remove("show"),e(this,p).classList.contains("is-invalid")&&e(this,p).classList.remove("is-invalid"),this.removeActiveSelection()},H=new WeakSet,l=function(){let t=5;return window.jQuery&&$.fn.tooltip!=null&&$.fn.tooltip.Constructor!=null&&(t=parseInt($.fn.tooltip.Constructor.VERSION.charAt(0))),t},K=new WeakSet,l=function(t){let s=Array.from(e(this,d).querySelectorAll("option")).find(i=>i.textContent==t);return!!(s&&s.getAttribute("selected"))},J=new WeakSet,l=function(t){return new RegExp(this.validationRegex.trim()).test(t)},T(X,"instances",new WeakMap);var C=X;export{C as default};
//# sourceMappingURL=tags.min.js.map
