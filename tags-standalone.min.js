function q(n){return n instanceof Element}function U(n,e){let t=e&&q(e)?e:document;return q(n)?n:t.querySelector(n)}function E(n,e){return U(n,e)}var Le="addEventListener",j=Le;var Se="removeEventListener",T=Se;var xe=(()=>{let n=!1;try{let e=Object.defineProperty({},"passive",{get(){return n=!0,n}});document[j]("DOMContentLoaded",function t(){document[T]("DOMContentLoaded",t,e)},e)}catch(e){throw Error("Passive events are not supported")}return n})(),ce=xe;var Ce=ce?{passive:!0}:!1,W=Ce;function L(n,e){n.classList.add(e)}function S(n,e){return n.classList.contains(e)}function p(n,e){n.classList.remove(e)}var Ae="aria-expanded",K=Ae;var je="show",m=je;var Te="data-bs-toggle",_=Te;var De=["dropdown","dropup","dropstart","dropend"],g=De;var Ne="dropdown-menu",J=Ne;function C(n,e){let t=new CustomEvent(n,{cancelable:!0});return e instanceof Object&&Object.keys(e).forEach(s=>{Object.defineProperty(t,s,{value:e[s]})}),t}function O(n){let e=n.closest("A");return n&&(n.hasAttribute("href")&&n.href.slice(-1)==="#"||e&&e.hasAttribute("href")&&e.href.slice(-1)==="#")}function D(n){n.focus()}function k(n){return n==="true"?!0:n==="false"?!1:Number.isNaN(+n)?n===""||n==="null"?null:n:+n}var Ie=n=>Object.keys(n),H=Ie;function Q(n,e,t,s){let o={...n.dataset},i={},r={};return H(o).forEach(l=>{let c=s&&l.includes(s)?l.replace(s,"").replace(/[A-Z]/,h=>h.toLowerCase()):l;r[c]=k(o[l])}),H(t).forEach(l=>{t[l]=k(t[l])}),H(e).forEach(l=>{l in t?i[l]=t[l]:l in r?i[l]=r[l]:i[l]=e[l]}),i}var V=class{constructor(e,t,s,o){let i=this,r=E(t);r[e]&&r[e].dispose(),i.element=r,s&&Object.keys(s).length&&(i.options=Q(r,s,o||{},"bs")),r[e]=i}dispose(e){let t=this;t.element[e]=null,Object.keys(t).forEach(s=>{t[s]=null})}};var[u]=g,v="Dropdown",Y=`[${_}="${u}"]`,N=g[1],P=g[2],B=g[3],x=`${J}-end`,de=["d-block","invisible"],qe=[u,N],he=[P,B],Oe={offset:5,display:"dynamic"},Z=C(`show.bs.${u}`),ue=C(`shown.bs.${u}`),G=C(`hide.bs.${u}`),fe=C(`hidden.bs.${u}`);function X(n,e){let{element:t,menu:s,originalClass:o,menuEnd:i,options:r}=n,{offset:l}=r,c=t.parentElement;if(["margin","top","bottom","left","right"].forEach(d=>{s.style[d]=""}),p(c,"position-static"),!e){let d=S(s,x);c.className=o.join(" "),d&&!i?p(s,x):!d&&i&&L(s,x);return}let a=g.find(d=>o.includes(d))||u,f={dropdown:[l,0,0],dropup:[0,0,l],dropstart:[-1,l,0],dropend:[-1,0,0,l]},I={dropdown:{top:"100%"},dropup:{top:"auto",bottom:"100%"},dropstart:{left:"auto",right:"100%"},dropend:{left:"100%",right:"auto"},menuEnd:{right:0,left:"auto"}};de.forEach(d=>L(s,d));let ye=new RegExp(`\\b(${u}|${N}|${P}|${B})+`),R={w:t.offsetWidth,h:t.offsetHeight},y={w:s.offsetWidth,h:s.offsetHeight},te=document.documentElement,se=document.body,ie=te.clientWidth||se.clientWidth,ne=te.clientHeight||se.clientHeight,w=t.getBoundingClientRect(),we=w.left+R.w-y.w<0,oe=w.left-y.w<0,Ee=w.left+y.w>=ie,re=w.left+y.w+R.w>=ie,z=w.top+y.h>=ne,le=w.top+y.h+R.h>=ne,ae=w.top-y.h<0;he.includes(a)&&oe&&re&&(a=u),he.includes(a)&&z&&(a=N),a===P&&oe&&!z&&(a=B),a===B&&re&&!z&&(a=P),a===N&&ae&&!le&&(a=u),a===u&&le&&!ae&&(a=N),f=f[a],s.style.margin=`${f.map(d=>d&&`${d}px`).join(" ")}`,Object.keys(I[a]).forEach(d=>{s.style[d]=I[a][d]}),S(c,a)||(c.className=c.className.replace(ye,a)),qe.includes(a)&&(!i&&Ee?L(s,x):i&&we&&p(s,x),S(s,x)&&Object.keys(I.menuEnd).forEach(d=>{s.style[d]=I.menuEnd[d]})),de.forEach(d=>p(s,d))}function pe(n){let e=n.open?j:T;document[e]("click",ge),document[e]("focus",ge),document[e]("keydown",$e),document[e]("keyup",He),n.options.display==="dynamic"&&(window[e]("scroll",ve,W),window[e]("resize",ve,W))}function me(n,e){let t=e?j:T;n.element[t]("click",ke)}function ee(){let n=g.concat("btn-group").map(e=>document.getElementsByClassName(`${e} ${m}`)).find(e=>e.length);return n&&n.length?Array.from(n[0].children).find(e=>e.hasAttribute(_)):null}function ge(n){let{target:e,type:t}=n;if(!e.closest)return;let s=ee(),o=s&&s.parentNode,i=s&&s[v],r=i&&i.menu,l=e.closest(Y)!==null,c=o&&o.contains(e)&&(e.tagName==="form"||e.closest("form")!==null);t==="click"&&O(e)&&n.preventDefault(),!(t==="focus"&&(e===s||e===r||r.contains(e)))&&(c||l||i&&i.hide(s))}function ke(n){let e=this;e[v].toggle(e),O(n.target)&&n.preventDefault()}function $e(n){(n.which===38||n.which===40)&&n.preventDefault()}function He({which:n}){let e=ee(),t=e[v],{menu:s,menuItems:o,open:i}=t,r=document.activeElement,l=r===e,c=s.contains(r),h=r.parentNode===s||r.parentNode.parentNode===s,a=o.indexOf(r);h&&(l?a=0:n===38?a=a>1?a-1:0:n===40&&(a=a<o.length-1?a+1:a),o[a]&&D(o[a])),(o.length&&h||!o.length&&(c||l)||!c)&&i&&n===27&&t.toggle()}function ve(){let n=ee(),e=n&&n[v];e&&e.open&&X(e,1)}var F=class extends V{constructor(e,t){super(v,e,Oe,t);let s=this,{element:o}=s,i=o.parentElement;s.menu=E(`.${J}`,i);let{menu:r}=s;s.originalClass=Array.from(i.classList),s.menuEnd=S(r,x),s.menuItems=[],Array.from(r.children).forEach(l=>{l.children.length&&l.children[0].tagName==="A"&&s.menuItems.push(l.children[0]),l.tagName==="A"&&s.menuItems.push(l)}),s.open=!1,me(s,1)}toggle(e){let t=this,{open:s}=t;s?t.hide(e):t.show(e)}show(e){let t=this,s=E(g.concat("btn-group").map(h=>`.${h}.${m}`).join(",")),o=s&&E(Y,s);o&&o[v].hide();let{element:i,menu:r,open:l}=t,c=i.parentNode;Z.relatedTarget=e||null,c.dispatchEvent(Z),!Z.defaultPrevented&&(X(t,1),L(r,m),L(c,m),i.setAttribute(K,!0),t.open=!l,setTimeout(()=>{D(r.getElementsByTagName("INPUT")[0]||i),pe(t),ue.relatedTarget=e||null,c.dispatchEvent(ue)},1))}hide(e){let t=this,{element:s,menu:o,open:i}=t,r=s.parentNode;G.relatedTarget=e||null,r.dispatchEvent(G),!G.defaultPrevented&&(p(o,m),p(r,m),X(t),s.setAttribute(K,!1),t.open=!i,D(s),setTimeout(()=>pe(t),1),fe.relatedTarget=e||null,r.dispatchEvent(fe))}dispose(){let e=this,{element:t}=e;S(t.parentNode,m)&&e.open&&e.hide(),me(e),super.dispose(v)}};F.init={component:v,selector:Y,constructor:F};var Ve="is-active",b=["is-active","bg-primary","text-white"],A="data-value",M=class{#r;#s;#i;#n;#t;#e;#o;constructor(e,t={}){e.style.display="none",e.dataset.tags=!0,this.#s=e;let s=i=>["true","false","1","0",!0,!1].includes(i)&&!!JSON.parse(i),o={...t,...e.dataset};for(this.allowNew=o.allowNew?s(o.allowNew):!1,this.showAllSuggestions=o.showAllSuggestions?s(o.showAllSuggestions):!1,this.badgeStyle=o.badgeStyle||"primary",this.allowClear=o.allowClear?s(o.allowClear):!1,this.server=o.server||!1,this.liveServer=o.liveServer?s(o.liveServer):!1,this.suggestionsThreshold=o.suggestionsThreshold?parseInt(o.suggestionsThreshold):1,this.validationRegex=o.regex||"",this.separator=o.separator?o.separator.split("|"):[],this.max=o.max?parseInt(o.max):null,this.clearLabel=o.clearLabel||"Clear",this.searchLabel=o.searchLabel||"Type a value",this.placeholder=this.#p(),this.#o=!1,this.parentForm=e.parentElement;this.parentForm&&(this.parentForm=this.parentForm.parentElement,this.parentForm.nodeName!="FORM"););if(this.parentForm.addEventListener("reset",i=>{this.reset()}),this.#i=document.createElement("div"),this.#n=document.createElement("div"),this.#t=document.createElement("ul"),this.#e=document.createElement("input"),this.#i.appendChild(this.#n),this.#n.appendChild(this.#e),this.#i.appendChild(this.#t),this.#s.parentNode.insertBefore(this.#i,this.#s.nextSibling),this.#b(),this.#g(),this.#m(),this.#v(),this.server&&!this.liveServer)this.#h();else{let i=Array.from(this.#s.querySelectorAll("option")).map(r=>({value:r.getAttribute("value"),label:r.innerText}));this.#u(i)}}static init(e="select[multiple]",t={}){let s=document.querySelectorAll(e);for(let o=0;o<s.length;o++)s[o].dataset.tags||new M(s[o],t)}#h(e=!1){this.#r&&this.#r.abort(),this.#r=new AbortController,fetch(this.server+"?query="+encodeURIComponent(this.#e.value),{signal:this.#r.signal}).then(t=>t.json()).then(t=>{let s=t.data||t;this.#u(s),this.#r=null,e&&this.#c()}).catch(t=>{t.name!=="AbortError"&&console.error(t)})}#p(){let e=this.#s.querySelector("option");if(!!e){if(!e.value){let t=e.innerText;return e.remove(),t}return this.#s.getAttribute("placeholder")?this.#s.getAttribute("placeholder"):this.#s.getAttribute("data-placeholder")?this.#s.getAttribute("data-placeholder"):""}}#m(){this.#t.classList.add("dropdown-menu","p-0"),this.#t.style.maxHeight="280px",this.#t.style.overflowY="auto",this.#t.addEventListener("mouseenter",e=>{this.#o=!1})}#g(){this.#i.classList.add("form-control","dropdown"),this.isDisabled()&&this.#i.setAttribute("readonly",""),this.#f()===4&&(this.#i.style.height="auto")}#v(){this.#n.addEventListener("click",t=>{this.isDisabled()||this.#e.focus()});let e=this.#s.querySelectorAll("option[selected]");for(let t=0;t<e.length;t++){let s=e[t];!s.value||(s.dataset.init=1,this.addItem(s.innerText,s.value))}}#b(){this.#e.type="text",this.#e.autocomplete="off",this.#e.style.backgroundColor="transparent",this.#e.style.border=0,this.#e.style.outline=0,this.#e.style.maxWidth="100%",this.#e.ariaLabel=this.searchLabel,this.isDisabled()&&this.#e.setAttribute("disabled",""),this.#l(),this.#e.addEventListener("input",e=>{this.#l(),this.#e.value.length>=this.suggestionsThreshold?this.liveServer?this.#h(!0):this.#c():this.#a()}),this.#e.addEventListener("focus",e=>{this.#e.value.length>=this.suggestionsThreshold&&this.#c()}),this.#e.addEventListener("focusout",e=>{this.#a()}),this.#e.addEventListener("keydown",e=>{let t=e.keyCode||e.key;if(this.separator.length&&this.separator.includes(e.key)){e.preventDefault(),this.addItem(this.#e.value,null)&&this.#d();return}switch(t){case 13:case"Enter":let s=this.getActiveSelection();s?s.click():this.allowNew&&!this.#E(this.#e.value)&&this.#e.value&&this.addItem(this.#e.value,null)&&this.#d(),e.preventDefault();break;case 38:case"ArrowUp":e.preventDefault(),this.#o=!0;let o=this.#y();this.#e.value.length==0&&this.#t.classList.contains("show")&&!o&&this.#a();break;case 40:case"ArrowDown":e.preventDefault(),this.#o=!0,this.#w(),this.#e.value.length==0&&!this.#t.classList.contains("show")&&this.#c();break;case 8:case"Backspace":this.#e.value.length==0&&(this.removeLastItem(),this.#l(),this.#a());break}})}#y(){let e=this.getActiveSelection();if(e){let t=e.parentNode;do t=t.previousSibling;while(t&&t.style.display=="none");return t?(e.classList.remove(...b),t.querySelector("a").classList.add(...b),t.parentNode.scrollTop=t.offsetTop-t.parentNode.offsetTop,t):null}return null}#w(){let e=this.getActiveSelection(),t=null;if(e){t=e.parentNode;do t=t.nextSibling;while(t&&t.style.display=="none");return t?(e.classList.remove(...b),t.querySelector("a").classList.add(...b),t.offsetTop>t.parentNode.offsetHeight-t.offsetHeight&&(t.parentNode.scrollTop+=t.offsetHeight),t):null}return t}#l(){this.#e.value?this.#e.size=this.#e.value.length+1:this.getSelectedValues().length?(this.#e.placeholder="",this.#e.size=1):(this.#e.size=this.placeholder.length,this.#e.placeholder=this.placeholder)}#u(e=null){for(;this.#t.lastChild;)this.#t.removeChild(this.#t.lastChild);for(let t=0;t<e.length;t++){let s=e[t];if(!s.value)continue;let o=document.createElement("li"),i=document.createElement("a");if(o.append(i),i.classList.add("dropdown-item"),i.setAttribute(A,s.value),i.setAttribute("href","#"),i.innerText=s.label,s.data)for(let[r,l]of Object.entries(s.data))i.dataset[r]=l;this.#t.appendChild(o),i.addEventListener("mouseenter",r=>{this.#o||(this.removeActiveSelection(),o.querySelector("a").classList.add(...b))}),i.addEventListener("mousemove",r=>{this.#o=!1}),i.addEventListener("mousedown",r=>{r.preventDefault()}),i.addEventListener("click",r=>{r.preventDefault(),this.addItem(i.innerText,i.getAttribute(A),i.dataset),this.#d()})}}reset(){this.removeAll();let e=this.#s.querySelectorAll("option[data-init]");for(let t=0;t<e.length;t++){let s=e[t];this.addItem(s.innerText,s.value)}this.#l()}#d(){this.#e.value="",this.#l(),this.#a(),this.max&&this.getSelectedValues().length===this.max?this.#e.style.visibility="hidden":this.#e.style.visibility=="hidden"&&(this.#e.style.visibility="visible")}getSelectedValues(){let e=this.#s.querySelectorAll("option:checked");return Array.from(e).map(t=>t.value)}#c(){this.#t.classList.contains("show")||this.#t.classList.add("show"),this.#t.style.left=this.#e.offsetLeft+"px";let e=this.#e.value.toLocaleLowerCase(),t=this.getSelectedValues(),s=this.#t.querySelectorAll("li"),o=!1,i=null,r=!1;for(let l=0;l<s.length;l++){let c=s[l],h=c.innerText.toLocaleLowerCase(),a=c.querySelector("a");if(a.classList.remove(...b),t.indexOf(a.getAttribute(A))!=-1){c.style.display="none";continue}r=!0;let f=e.length===0||h.indexOf(e)!==-1;this.showAllSuggestions||this.suggestionsThreshold===0||f?(c.style.display="list-item",o=!0,!i&&f&&(i=c)):c.style.display="none"}o||this.#t.classList.remove("show"),i?(this.#i.classList.contains("is-invalid")&&this.#i.classList.remove("is-invalid"),i.querySelector("a").classList.add(...b),i.parentNode.scrollTop=i.offsetTop-i.parentNode.offsetTop):!this.allowNew&&!(e.length===0&&!r)?this.#i.classList.add("is-invalid"):this.validationRegex&&this.#i.classList.contains("is-invalid")&&this.#i.classList.remove("is-invalid")}#a(){this.#t.classList.contains("show")&&this.#t.classList.remove("show"),this.#i.classList.contains("is-invalid")&&this.#i.classList.remove("is-invalid")}#f(){let e=5;return window.jQuery&&$.fn.tooltip!=null&&$.fn.tooltip.Constructor!=null&&(e=parseInt($.fn.tooltip.Constructor.VERSION.charAt(0))),e}#E(e){let t=Array.from(this.#s.querySelectorAll("option")).find(s=>s.textContent==e);return!!(t&&t.getAttribute("selected"))}#L(e){return new RegExp(this.validationRegex.trim()).test(e)}getActiveSelection(){return this.#t.querySelector("a."+Ve)}removeActiveSelection(){let e=this.getActiveSelection();e&&e.classList.remove(...b)}removeAll(){this.#n.querySelectorAll("span").forEach(t=>{this.removeLastItem()})}removeLastItem(){let e=this.#n.querySelectorAll("span");if(!e.length)return;let t=e[e.length-1];this.removeItem(t.getAttribute(A))}isDisabled(){return this.#s.hasAttribute("disabled")||this.#s.hasAttribute("readonly")}addItem(e,t=null,s={}){if(t||(t=e),this.validationRegex&&!this.#L(e))return this.#i.classList.add("is-invalid"),!1;let o=this.#f(),i=this.#s.querySelector('option[value="'+t+'"]');i&&(s=i.dataset);let r=e,l=document.createElement("span"),c=["badge"],h=this.badgeStyle;if(s.badgeStyle&&(h=s.badgeStyle),s.badgeClass&&c.push(s.badgeClass),o===5?c=[...c,"me-2","bg-"+h]:c=[...c,"mr-2","badge-"+h],l.classList.add(...c),l.setAttribute(A,t),this.allowClear&&!this.isDisabled()&&(r=(o===5?'<button type="button" style="font-size:0.65em" class="me-2 btn-close btn-close-white" aria-label="'+this.clearLabel+'"></button>':'<button type="button" style="font-size:1em;float:left;text-shadow:none;color:currentColor;" class="mr-2 close" aria-label="'+this.clearLabel+'"><span aria-hidden="true">&times;</span></button>')+r),l.innerHTML=r,this.#n.insertBefore(l,this.#e),this.allowClear&&!this.isDisabled()&&l.querySelector("button").addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),this.removeItem(t),document.activeElement.blur()}),i)i.setAttribute("selected","selected");else{i=document.createElement("option"),i.value=t,i.innerText=e;for(let[a,f]of Object.entries(s))i.dataset[a]=f;i.setAttribute("selected","selected"),this.#s.appendChild(i)}return!0}removeItem(e){let t=this.#n.querySelector("span["+A+'="'+e+'"]');if(!t)return;t.remove();let s=this.#s.querySelector('option[value="'+e+'"]');s&&s.removeAttribute("selected"),this.#e.style.visibility=="hidden"&&this.max&&this.getSelectedValues().length<this.max&&(this.#e.style.visibility="visible")}},be=M;var Ht=be;export{Ht as default};
//# sourceMappingURL=tags-standalone.min.js.map
