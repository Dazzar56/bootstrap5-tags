function q(n){return n instanceof Element}function U(n,e){let t=e&&q(e)?e:document;return q(n)?n:t.querySelector(n)}function E(n,e){return U(n,e)}var Le="addEventListener",j=Le;var xe="removeEventListener",N=xe;var Ae=(()=>{let n=!1;try{let e=Object.defineProperty({},"passive",{get(){return n=!0,n}});document[j]("DOMContentLoaded",function t(){document[N]("DOMContentLoaded",t,e)},e)}catch(e){throw Error("Passive events are not supported")}return n})(),ce=Ae;var Ce=ce?{passive:!0}:!1,K=Ce;function S(n,e){n.classList.add(e)}function L(n,e){return n.classList.contains(e)}function p(n,e){n.classList.remove(e)}var je="aria-expanded",_=je;var Ne="show",m=Ne;var Te="data-bs-toggle",J=Te;var Ie=["dropdown","dropup","dropstart","dropend"],g=Ie;var De="dropdown-menu",Q=De;function A(n,e){let t=new CustomEvent(n,{cancelable:!0});return e instanceof Object&&Object.keys(e).forEach(s=>{Object.defineProperty(t,s,{value:e[s]})}),t}function O(n){let e=n.closest("A");return n&&(n.hasAttribute("href")&&n.href.slice(-1)==="#"||e&&e.hasAttribute("href")&&e.href.slice(-1)==="#")}function T(n){n.focus()}function k(n){return n==="true"?!0:n==="false"?!1:Number.isNaN(+n)?n===""||n==="null"?null:n:+n}var qe=n=>Object.keys(n),P=qe;function Y(n,e,t,s){let r={...n.dataset},i={},l={};return P(r).forEach(o=>{let d=s&&o.includes(s)?o.replace(s,"").replace(/[A-Z]/,h=>h.toLowerCase()):o;l[d]=k(r[o])}),P(t).forEach(o=>{t[o]=k(t[o])}),P(e).forEach(o=>{o in t?i[o]=t[o]:o in l?i[o]=l[o]:i[o]=e[o]}),i}var V=class{constructor(e,t,s,r){let i=this,l=E(t);l[e]&&l[e].dispose(),i.element=l,s&&Object.keys(s).length&&(i.options=Y(l,s,r||{},"bs")),l[e]=i}dispose(e){let t=this;t.element[e]=null,Object.keys(t).forEach(s=>{t[s]=null})}};var[u]=g,v="Dropdown",Z=`[${J}="${u}"]`,I=g[1],H=g[2],M=g[3],x=`${Q}-end`,he=["d-block","invisible"],Oe=[u,I],ue=[H,M],ke={offset:5,display:"dynamic"},G=A(`show.bs.${u}`),fe=A(`shown.bs.${u}`),X=A(`hide.bs.${u}`),pe=A(`hidden.bs.${u}`);function ee(n,e){let{element:t,menu:s,originalClass:r,menuEnd:i,options:l}=n,{offset:o}=l,d=t.parentElement;if(["margin","top","bottom","left","right"].forEach(c=>{s.style[c]=""}),p(d,"position-static"),!e){let c=L(s,x);d.className=r.join(" "),c&&!i?p(s,x):!c&&i&&S(s,x);return}let a=g.find(c=>r.includes(c))||u,f={dropdown:[o,0,0],dropup:[0,0,o],dropstart:[-1,o,0],dropend:[-1,0,0,o]},D={dropdown:{top:"100%"},dropup:{top:"auto",bottom:"100%"},dropstart:{left:"auto",right:"100%"},dropend:{left:"100%",right:"auto"},menuEnd:{right:0,left:"auto"}};he.forEach(c=>S(s,c));let we=new RegExp(`\\b(${u}|${I}|${H}|${M})+`),z={w:t.offsetWidth,h:t.offsetHeight},y={w:s.offsetWidth,h:s.offsetHeight},se=document.documentElement,ie=document.body,ne=se.clientWidth||ie.clientWidth,re=se.clientHeight||ie.clientHeight,w=t.getBoundingClientRect(),Ee=w.left+z.w-y.w<0,oe=w.left-y.w<0,Se=w.left+y.w>=ne,le=w.left+y.w+z.w>=ne,W=w.top+y.h>=re,ae=w.top+y.h+z.h>=re,de=w.top-y.h<0;ue.includes(a)&&oe&&le&&(a=u),ue.includes(a)&&W&&(a=I),a===H&&oe&&!W&&(a=M),a===M&&le&&!W&&(a=H),a===I&&de&&!ae&&(a=u),a===u&&ae&&!de&&(a=I),f=f[a],s.style.margin=`${f.map(c=>c&&`${c}px`).join(" ")}`,Object.keys(D[a]).forEach(c=>{s.style[c]=D[a][c]}),L(d,a)||(d.className=d.className.replace(we,a)),Oe.includes(a)&&(!i&&Se?S(s,x):i&&Ee&&p(s,x),L(s,x)&&Object.keys(D.menuEnd).forEach(c=>{s.style[c]=D.menuEnd[c]})),he.forEach(c=>p(s,c))}function me(n){let e=n.open?j:N;document[e]("click",ve),document[e]("focus",ve),document[e]("keydown",Ve),document[e]("keyup",$e),n.options.display==="dynamic"&&(window[e]("scroll",be,K),window[e]("resize",be,K))}function ge(n,e){let t=e?j:N;n.element[t]("click",Pe)}function te(){let n=g.concat("btn-group").map(e=>document.getElementsByClassName(`${e} ${m}`)).find(e=>e.length);return n&&n.length?Array.from(n[0].children).find(e=>e.hasAttribute(J)):null}function ve(n){let{target:e,type:t}=n;if(!e.closest)return;let s=te(),r=s&&s.parentNode,i=s&&s[v],l=i&&i.menu,o=e.closest(Z)!==null,d=r&&r.contains(e)&&(e.tagName==="form"||e.closest("form")!==null);t==="click"&&O(e)&&n.preventDefault(),!(t==="focus"&&(e===s||e===l||l.contains(e)))&&(d||o||i&&i.hide(s))}function Pe(n){let e=this;e[v].toggle(e),O(n.target)&&n.preventDefault()}function Ve(n){(n.which===38||n.which===40)&&n.preventDefault()}function $e({which:n}){let e=te(),t=e[v],{menu:s,menuItems:r,open:i}=t,l=document.activeElement,o=l===e,d=s.contains(l),h=l.parentNode===s||l.parentNode.parentNode===s,a=r.indexOf(l);h&&(o?a=0:n===38?a=a>1?a-1:0:n===40&&(a=a<r.length-1?a+1:a),r[a]&&T(r[a])),(r.length&&h||!r.length&&(d||o)||!d)&&i&&n===27&&t.toggle()}function be(){let n=te(),e=n&&n[v];e&&e.open&&ee(e,1)}var F=class extends V{constructor(e,t){super(v,e,ke,t);let s=this,{element:r}=s,i=r.parentElement;s.menu=E(`.${Q}`,i);let{menu:l}=s;s.originalClass=Array.from(i.classList),s.menuEnd=L(l,x),s.menuItems=[],Array.from(l.children).forEach(o=>{o.children.length&&o.children[0].tagName==="A"&&s.menuItems.push(o.children[0]),o.tagName==="A"&&s.menuItems.push(o)}),s.open=!1,ge(s,1)}toggle(e){let t=this,{open:s}=t;s?t.hide(e):t.show(e)}show(e){let t=this,s=E(g.concat("btn-group").map(h=>`.${h}.${m}`).join(",")),r=s&&E(Z,s);r&&r[v].hide();let{element:i,menu:l,open:o}=t,d=i.parentNode;G.relatedTarget=e||null,d.dispatchEvent(G),!G.defaultPrevented&&(ee(t,1),S(l,m),S(d,m),i.setAttribute(_,!0),t.open=!o,setTimeout(()=>{T(l.getElementsByTagName("INPUT")[0]||i),me(t),fe.relatedTarget=e||null,d.dispatchEvent(fe)},1))}hide(e){let t=this,{element:s,menu:r,open:i}=t,l=s.parentNode;X.relatedTarget=e||null,l.dispatchEvent(X),!X.defaultPrevented&&(p(r,m),p(l,m),ee(t),s.setAttribute(_,!1),t.open=!i,T(s),setTimeout(()=>me(t),1),pe.relatedTarget=e||null,l.dispatchEvent(pe))}dispose(){let e=this,{element:t}=e;L(t.parentNode,m)&&e.open&&e.hide(),ge(e),super.dispose(v)}};F.init={component:v,selector:Z,constructor:F};var He="is-active",b=["is-active","bg-primary","text-white"],C="data-value",B=new WeakMap,R=class{#a;#t;#i;#n;#s;#e;#l;#r;constructor(e,t={}){e.style.display="none",e.dataset.tags=!0,this.#t=e;let s=i=>["true","false","1","0",!0,!1].includes(i)&&!!JSON.parse(i),r={...t,...e.dataset};for(this.allowNew=r.allowNew?s(r.allowNew):!1,this.showAllSuggestions=r.showAllSuggestions?s(r.showAllSuggestions):!1,this.badgeStyle=r.badgeStyle||"primary",this.allowClear=r.allowClear?s(r.allowClear):!1,this.server=r.server||!1,this.liveServer=r.liveServer?s(r.liveServer):!1,this.serverParams=r.serverParams||{},typeof this.serverParams=="string"&&(this.serverParams=JSON.parse(this.serverParams)),this.suggestionsThreshold=typeof r.suggestionsThreshold!="undefined"?parseInt(r.suggestionsThreshold):1,this.validationRegex=r.regex||"",this.separator=r.separator?r.separator.split("|"):[],this.max=r.max?parseInt(r.max):null,this.clearLabel=r.clearLabel||"Clear",this.searchLabel=r.searchLabel||"Type a value",this.placeholder=this.#m(),this.#l=!1,this.#r=!0,this.parentForm=e.parentElement;this.parentForm&&(this.parentForm=this.parentForm.parentElement,this.parentForm.nodeName!="FORM"););this.reset=this.reset.bind(this),this.parentForm.addEventListener("reset",this.reset),this.#i=document.createElement("div"),this.#n=document.createElement("div"),this.#s=document.createElement("ul"),this.#e=document.createElement("input"),this.#i.appendChild(this.#n),this.#n.appendChild(this.#e),this.#i.appendChild(this.#s),this.#t.parentNode.insertBefore(this.#i,this.#t.nextSibling),this.#v(),this.#g(),this.#b(),this.#y(),this.resetState(),this.server&&!this.liveServer?this.#u():this.resetSuggestions()}static init(e="select[multiple]",t={}){let s=document.querySelectorAll(e),r;for(let i=0;i<s.length;i++)s[i].dataset.tags||(r=new R(s[i],t),B.set(s[i],r))}static getInstance(e){if(B.has(e))return B.get(e)}dispose(){B.delete(this.#t),this.#t.dataset.tags=null,this.#t.style.display="block",this.#i.parentNode.removeChild(this.#i),this.parentForm.removeEventListener("reset",this.reset)}resetState(){this.isDisabled()?(this.#i.setAttribute("readonly",""),this.#e.setAttribute("disabled","")):(this.#i.hasAttribute("readonly")&&this.#i.removeAttribute("readonly"),this.#e.hasAttribute("disabled")&&this.#e.removeAttribute("disabled"))}resetSuggestions(){let e=Array.from(this.#t.querySelectorAll("option")).filter(t=>!t.disabled).map(t=>({value:t.getAttribute("value"),label:t.innerText}));this.#f(e)}#u(e=!1){this.#a&&this.#a.abort(),this.#a=new AbortController,this.serverParams.query=this.#e.value;let t=new URLSearchParams(this.serverParams).toString();fetch(this.server+"?"+t,{signal:this.#a.signal}).then(s=>s.json()).then(s=>{let r=s.data||s;this.#f(r),this.#a=null,e&&this.#c()}).catch(s=>{s.name!=="AbortError"&&console.error(s)})}#m(){if(this.#t.hasAttribute("placeholder"))return this.#t.getAttribute("placeholder");if(this.#t.dataset.placeholder)return this.#t.dataset.placeholder;let e=this.#t.querySelector("option");return e?(e.hasAttribute("selected")&&e.removeAttribute("selected"),e.value?"":e.innerText):""}#g(){this.#s.classList.add("dropdown-menu","p-0"),this.#s.style.maxHeight="280px",this.#s.style.overflowY="auto",this.#s.addEventListener("mouseenter",e=>{this.#l=!1})}#v(){this.#i.classList.add("form-control","dropdown"),this.#p()===4&&(this.#i.style.height="auto")}#b(){this.#n.addEventListener("click",t=>{this.isDisabled()||this.#e.style.visibility!="hidden"&&this.#e.focus()});let e=this.#t.selectedOptions;for(let t=0;t<e.length;t++){let s=e[t];!s.value||(s.dataset.init=1,this.addItem(s.innerText,s.value))}}#y(){this.#e.type="text",this.#e.autocomplete="off",this.#e.spellcheck=!1,this.#e.style.backgroundColor="transparent",this.#e.style.border=0,this.#e.style.outline=0,this.#e.style.maxWidth="100%",this.#e.ariaLabel=this.searchLabel,this.#o(),this.#e.addEventListener("input",e=>{let t=e.data.slice(-1);if(this.separator.length&&this.#e.value&&this.separator.includes(t)){this.addItem(this.#e.value.slice(0,-1),null)&&this.#h();return}this.#o(),this.#e.value.length>=this.suggestionsThreshold?this.liveServer?this.#u(!0):this.#c():this.#d()}),this.#e.addEventListener("focus",e=>{this.#e.value.length>=this.suggestionsThreshold&&this.#c()}),this.#e.addEventListener("focusout",e=>{this.#d()}),this.#e.addEventListener("keydown",e=>{switch(e.keyCode||e.key){case 13:case"Enter":e.preventDefault();let s=this.getActiveSelection();s?s.click():this.allowNew&&!this.#S(this.#e.value)&&this.#e.value&&this.addItem(this.#e.value,null)&&this.#h();break;case 38:case"ArrowUp":e.preventDefault(),this.#l=!0;let r=this.#w();this.#e.value.length==0&&this.#s.classList.contains("show")&&!r&&this.#d();break;case 40:case"ArrowDown":e.preventDefault(),this.#l=!0,this.#E(),this.#e.value.length==0&&!this.#s.classList.contains("show")&&this.#c();break;case 8:case"Backspace":this.#e.value.length==0&&(this.removeLastItem(),this.#o(),this.#d());break}})}#w(){let e=this.getActiveSelection();if(e){let t=e.parentNode;do t=t.previousSibling;while(t&&t.style.display=="none");return t?(e.classList.remove(...b),t.querySelector("a").classList.add(...b),t.parentNode.scrollTop=t.offsetTop-t.parentNode.offsetTop,t):null}return null}#E(){let e=this.getActiveSelection(),t=null;if(e){t=e.parentNode;do t=t.nextSibling;while(t&&t.style.display=="none");return t?(e.classList.remove(...b),t.querySelector("a").classList.add(...b),t.offsetTop>t.parentNode.offsetHeight-t.offsetHeight&&(t.parentNode.scrollTop+=t.offsetHeight),t):null}return t}#o(){this.#e.value?this.#e.size=this.#e.value.length+1:this.getSelectedValues().length?(this.#e.placeholder="",this.#e.size=1):(this.#e.size=this.placeholder.length>0?this.placeholder.length:1,this.#e.placeholder=this.placeholder)}#f(e=null){for(;this.#s.lastChild;)this.#s.removeChild(this.#s.lastChild);for(let t=0;t<e.length;t++){let s=e[t];if(!s.value)continue;let r=document.createElement("li"),i=document.createElement("a");if(r.append(i),i.classList.add("dropdown-item"),i.setAttribute(C,s.value),i.setAttribute("href","#"),i.innerText=s.label,s.data)for(let[l,o]of Object.entries(s.data))i.dataset[l]=o;this.#s.appendChild(r),i.addEventListener("mouseenter",l=>{this.#l||(this.removeActiveSelection(),r.querySelector("a").classList.add(...b))}),i.addEventListener("mousemove",l=>{this.#l=!1}),i.addEventListener("mousedown",l=>{l.preventDefault()}),i.addEventListener("click",l=>{l.preventDefault(),this.addItem(i.innerText,i.getAttribute(C),i.dataset),this.#h()})}}reset(){this.removeAll(),this.#r=!1;let e=this.#t.querySelectorAll("option[data-init]");for(let t=0;t<e.length;t++){let s=e[t];this.addItem(s.innerText,s.value)}this.#o(),this.#r=!0}#h(){this.#e.value="",this.#o(),this.#d(),this.max&&this.getSelectedValues().length===this.max?this.#e.style.visibility="hidden":this.#e.style.visibility=="hidden"&&(this.#e.style.visibility="visible"),this.isSingle()&&document.activeElement.blur()}getSelectedValues(){let e=this.#t.querySelectorAll("option[selected]");return Array.from(e).map(t=>t.value)}#c(){if(this.#e.style.visibility=="hidden")return;this.#s.style.left=this.#e.offsetLeft+"px";let e=this.#e.value.toLocaleLowerCase(),t=this.getSelectedValues(),s=this.#s.querySelectorAll("li"),r=!1,i=null,l=!1;for(let o=0;o<s.length;o++){let d=s[o],h=d.innerText.toLocaleLowerCase(),a=d.querySelector("a");if(a.classList.remove(...b),t.indexOf(a.getAttribute(C))!=-1){d.style.display="none";continue}l=!0;let f=e.length===0||h.indexOf(e)!==-1;this.showAllSuggestions||this.suggestionsThreshold===0||f?(d.style.display="list-item",r=!0,!i&&f&&(i=d)):d.style.display="none"}i?(this.#i.classList.remove("is-invalid"),i.querySelector("a").classList.add(...b),i.parentNode.scrollTop=i.offsetTop-i.parentNode.offsetTop):!this.allowNew&&!(e.length===0&&!l)?this.#i.classList.add("is-invalid"):this.validationRegex&&this.isInvalid()&&this.#i.classList.remove("is-invalid"),!r||this.isInvalid()?this.#s.classList.remove("show"):this.#s.classList.add("show")}#d(){this.#s.classList.remove("show"),this.#i.classList.remove("is-invalid"),this.removeActiveSelection()}#p(){let e=5;return window.jQuery&&$.fn.tooltip!=null&&$.fn.tooltip.Constructor!=null&&(e=parseInt($.fn.tooltip.Constructor.VERSION.charAt(0))),e}#S(e){let t=Array.from(this.#t.querySelectorAll("option")).find(s=>s.textContent==e);return!!(t&&t.getAttribute("selected"))}#L(e){return new RegExp(this.validationRegex.trim()).test(e)}getActiveSelection(){return this.#s.querySelector("a."+He)}removeActiveSelection(){let e=this.getActiveSelection();e&&e.classList.remove(...b)}removeAll(){this.getSelectedValues().forEach(t=>{this.removeItem(t)}),this.#o()}removeLastItem(e){e&&(this.#r=!1);let t=this.#n.querySelectorAll("span");if(!t.length)return;let s=t[t.length-1];this.removeItem(s.getAttribute(C)),this.#r=!0}isDisabled(){return this.#t.hasAttribute("disabled")||this.#t.disabled||this.#t.hasAttribute("readonly")}isInvalid(){return this.#i.classList.contains("is-invalid")}isSingle(){return!this.#t.hasAttribute("multiple")}addItem(e,t=null,s={}){if(!e||(t||(t=e),this.max&&this.getSelectedValues().length>=this.max))return!1;if(this.validationRegex&&!this.#L(e))return this.#i.classList.add("is-invalid"),!1;this.isSingle()&&this.getSelectedValues().length&&this.removeLastItem(!0);let r=this.#p(),i=this.#t.querySelector('option[value="'+t+'"]');i&&(s=i.dataset);let l=e,o=document.createElement("span"),d=["badge"],h=this.badgeStyle;if(s.badgeStyle&&(h=s.badgeStyle),s.badgeClass&&d.push(s.badgeClass),r===5?d=[...d,"me-2","bg-"+h]:d=[...d,"mr-2","badge-"+h],o.classList.add(...d),o.setAttribute(C,t),this.allowClear&&(l=(r===5?'<button type="button" style="font-size:0.65em" class="me-2 float-start btn-close btn-close-white" aria-label="'+this.clearLabel+'"></button>':'<button type="button" style="font-size:1em;float:left;text-shadow:none;color:currentColor;transform:scale(1.2)" class="mr-2 close" aria-label="'+this.clearLabel+'"><span aria-hidden="true">&times;</span></button>')+l),o.innerHTML=l,this.#n.insertBefore(o,this.#e),this.allowClear&&o.querySelector("button").addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),this.isDisabled()||(this.removeItem(t),document.activeElement.blur(),this.#o())}),!i){i=document.createElement("option"),i.value=t,i.innerText=e;for(let[a,f]of Object.entries(s))i.dataset[a]=f;this.#t.appendChild(i)}return i.setAttribute("selected","selected"),i.selected=!0,this.#r&&this.#t.dispatchEvent(new Event("change",{bubbles:!0})),!0}removeItem(e){let t=this.#n.querySelector("span["+C+'="'+e+'"]');if(!t)return;t.remove();let s=this.#t.querySelector('option[value="'+e+'"]');s&&(s.removeAttribute("selected"),s.selected=!1,this.#r&&this.#t.dispatchEvent(new Event("change",{bubbles:!0}))),this.#e.style.visibility=="hidden"&&this.max&&this.getSelectedValues().length<this.max&&(this.#e.style.visibility="visible")}},ye=R;var $t=ye;export{$t as default};
//# sourceMappingURL=tags-standalone.min.js.map
