function q(n){return n instanceof Element}function W(n,e){let t=e&&q(e)?e:document;return q(n)?n:t.querySelector(n)}function E(n,e){return W(n,e)}var Le="addEventListener",j=Le;var xe="removeEventListener",T=xe;var Ae=(()=>{let n=!1;try{let e=Object.defineProperty({},"passive",{get(){return n=!0,n}});document[j]("DOMContentLoaded",function t(){document[T]("DOMContentLoaded",t,e)},e)}catch(e){throw Error("Passive events are not supported")}return n})(),de=Ae;var Ce=de?{passive:!0}:!1,U=Ce;function S(n,e){n.classList.add(e)}function L(n,e){return n.classList.contains(e)}function p(n,e){n.classList.remove(e)}var je="aria-expanded",K=je;var Te="show",m=Te;var Ne="data-bs-toggle",_=Ne;var De=["dropdown","dropup","dropstart","dropend"],g=De;var Ie="dropdown-menu",J=Ie;function A(n,e){let t=new CustomEvent(n,{cancelable:!0});return e instanceof Object&&Object.keys(e).forEach(s=>{Object.defineProperty(t,s,{value:e[s]})}),t}function O(n){let e=n.closest("A");return n&&(n.hasAttribute("href")&&n.href.slice(-1)==="#"||e&&e.hasAttribute("href")&&e.href.slice(-1)==="#")}function N(n){n.focus()}function k(n){return n==="true"?!0:n==="false"?!1:Number.isNaN(+n)?n===""||n==="null"?null:n:+n}var qe=n=>Object.keys(n),V=qe;function Q(n,e,t,s){let o={...n.dataset},i={},l={};return V(o).forEach(r=>{let c=s&&r.includes(s)?r.replace(s,"").replace(/[A-Z]/,h=>h.toLowerCase()):r;l[c]=k(o[r])}),V(t).forEach(r=>{t[r]=k(t[r])}),V(e).forEach(r=>{r in t?i[r]=t[r]:r in l?i[r]=l[r]:i[r]=e[r]}),i}var H=class{constructor(e,t,s,o){let i=this,l=E(t);l[e]&&l[e].dispose(),i.element=l,s&&Object.keys(s).length&&(i.options=Q(l,s,o||{},"bs")),l[e]=i}dispose(e){let t=this;t.element[e]=null,Object.keys(t).forEach(s=>{t[s]=null})}};var[u]=g,v="Dropdown",Y=`[${_}="${u}"]`,D=g[1],M=g[2],P=g[3],x=`${J}-end`,he=["d-block","invisible"],Oe=[u,D],ue=[M,P],ke={offset:5,display:"dynamic"},Z=A(`show.bs.${u}`),fe=A(`shown.bs.${u}`),G=A(`hide.bs.${u}`),pe=A(`hidden.bs.${u}`);function X(n,e){let{element:t,menu:s,originalClass:o,menuEnd:i,options:l}=n,{offset:r}=l,c=t.parentElement;if(["margin","top","bottom","left","right"].forEach(d=>{s.style[d]=""}),p(c,"position-static"),!e){let d=L(s,x);c.className=o.join(" "),d&&!i?p(s,x):!d&&i&&S(s,x);return}let a=g.find(d=>o.includes(d))||u,f={dropdown:[r,0,0],dropup:[0,0,r],dropstart:[-1,r,0],dropend:[-1,0,0,r]},I={dropdown:{top:"100%"},dropup:{top:"auto",bottom:"100%"},dropstart:{left:"auto",right:"100%"},dropend:{left:"100%",right:"auto"},menuEnd:{right:0,left:"auto"}};he.forEach(d=>S(s,d));let we=new RegExp(`\\b(${u}|${D}|${M}|${P})+`),R={w:t.offsetWidth,h:t.offsetHeight},y={w:s.offsetWidth,h:s.offsetHeight},se=document.documentElement,ie=document.body,ne=se.clientWidth||ie.clientWidth,oe=se.clientHeight||ie.clientHeight,w=t.getBoundingClientRect(),Ee=w.left+R.w-y.w<0,re=w.left-y.w<0,Se=w.left+y.w>=ne,le=w.left+y.w+R.w>=ne,z=w.top+y.h>=oe,ae=w.top+y.h+R.h>=oe,ce=w.top-y.h<0;ue.includes(a)&&re&&le&&(a=u),ue.includes(a)&&z&&(a=D),a===M&&re&&!z&&(a=P),a===P&&le&&!z&&(a=M),a===D&&ce&&!ae&&(a=u),a===u&&ae&&!ce&&(a=D),f=f[a],s.style.margin=`${f.map(d=>d&&`${d}px`).join(" ")}`,Object.keys(I[a]).forEach(d=>{s.style[d]=I[a][d]}),L(c,a)||(c.className=c.className.replace(we,a)),Oe.includes(a)&&(!i&&Se?S(s,x):i&&Ee&&p(s,x),L(s,x)&&Object.keys(I.menuEnd).forEach(d=>{s.style[d]=I.menuEnd[d]})),he.forEach(d=>p(s,d))}function me(n){let e=n.open?j:T;document[e]("click",ve),document[e]("focus",ve),document[e]("keydown",$e),document[e]("keyup",He),n.options.display==="dynamic"&&(window[e]("scroll",be,U),window[e]("resize",be,U))}function ge(n,e){let t=e?j:T;n.element[t]("click",Ve)}function ee(){let n=g.concat("btn-group").map(e=>document.getElementsByClassName(`${e} ${m}`)).find(e=>e.length);return n&&n.length?Array.from(n[0].children).find(e=>e.hasAttribute(_)):null}function ve(n){let{target:e,type:t}=n;if(!e.closest)return;let s=ee(),o=s&&s.parentNode,i=s&&s[v],l=i&&i.menu,r=e.closest(Y)!==null,c=o&&o.contains(e)&&(e.tagName==="form"||e.closest("form")!==null);t==="click"&&O(e)&&n.preventDefault(),!(t==="focus"&&(e===s||e===l||l.contains(e)))&&(c||r||i&&i.hide(s))}function Ve(n){let e=this;e[v].toggle(e),O(n.target)&&n.preventDefault()}function $e(n){(n.which===38||n.which===40)&&n.preventDefault()}function He({which:n}){let e=ee(),t=e[v],{menu:s,menuItems:o,open:i}=t,l=document.activeElement,r=l===e,c=s.contains(l),h=l.parentNode===s||l.parentNode.parentNode===s,a=o.indexOf(l);h&&(r?a=0:n===38?a=a>1?a-1:0:n===40&&(a=a<o.length-1?a+1:a),o[a]&&N(o[a])),(o.length&&h||!o.length&&(c||r)||!c)&&i&&n===27&&t.toggle()}function be(){let n=ee(),e=n&&n[v];e&&e.open&&X(e,1)}var F=class extends H{constructor(e,t){super(v,e,ke,t);let s=this,{element:o}=s,i=o.parentElement;s.menu=E(`.${J}`,i);let{menu:l}=s;s.originalClass=Array.from(i.classList),s.menuEnd=L(l,x),s.menuItems=[],Array.from(l.children).forEach(r=>{r.children.length&&r.children[0].tagName==="A"&&s.menuItems.push(r.children[0]),r.tagName==="A"&&s.menuItems.push(r)}),s.open=!1,ge(s,1)}toggle(e){let t=this,{open:s}=t;s?t.hide(e):t.show(e)}show(e){let t=this,s=E(g.concat("btn-group").map(h=>`.${h}.${m}`).join(",")),o=s&&E(Y,s);o&&o[v].hide();let{element:i,menu:l,open:r}=t,c=i.parentNode;Z.relatedTarget=e||null,c.dispatchEvent(Z),!Z.defaultPrevented&&(X(t,1),S(l,m),S(c,m),i.setAttribute(K,!0),t.open=!r,setTimeout(()=>{N(l.getElementsByTagName("INPUT")[0]||i),me(t),fe.relatedTarget=e||null,c.dispatchEvent(fe)},1))}hide(e){let t=this,{element:s,menu:o,open:i}=t,l=s.parentNode;G.relatedTarget=e||null,l.dispatchEvent(G),!G.defaultPrevented&&(p(o,m),p(l,m),X(t),s.setAttribute(K,!1),t.open=!i,N(s),setTimeout(()=>me(t),1),pe.relatedTarget=e||null,l.dispatchEvent(pe))}dispose(){let e=this,{element:t}=e;L(t.parentNode,m)&&e.open&&e.hide(),ge(e),super.dispose(v)}};F.init={component:v,selector:Y,constructor:F};var Me="is-active",b=["is-active","bg-primary","text-white"],C="data-value",te=new WeakMap,B=class{#a;#t;#s;#n;#i;#e;#r;#o;constructor(e,t={}){e.style.display="none",e.dataset.tags=!0,this.#t=e;let s=i=>["true","false","1","0",!0,!1].includes(i)&&!!JSON.parse(i),o={...t,...e.dataset};for(this.allowNew=o.allowNew?s(o.allowNew):!1,this.showAllSuggestions=o.showAllSuggestions?s(o.showAllSuggestions):!1,this.badgeStyle=o.badgeStyle||"primary",this.allowClear=o.allowClear?s(o.allowClear):!1,this.server=o.server||!1,this.liveServer=o.liveServer?s(o.liveServer):!1,this.suggestionsThreshold=typeof o.suggestionsThreshold!="undefined"?parseInt(o.suggestionsThreshold):1,this.validationRegex=o.regex||"",this.separator=o.separator?o.separator.split("|"):[],this.max=o.max?parseInt(o.max):null,this.clearLabel=o.clearLabel||"Clear",this.searchLabel=o.searchLabel||"Type a value",e.hasAttribute("multiple")||(this.max=1),this.placeholder=this.#m(),this.#r=!1,this.#o=!0,this.parentForm=e.parentElement;this.parentForm&&(this.parentForm=this.parentForm.parentElement,this.parentForm.nodeName!="FORM"););this.reset=this.reset.bind(this),this.parentForm.addEventListener("reset",this.reset),this.#s=document.createElement("div"),this.#n=document.createElement("div"),this.#i=document.createElement("ul"),this.#e=document.createElement("input"),this.#s.appendChild(this.#n),this.#n.appendChild(this.#e),this.#s.appendChild(this.#i),this.#t.parentNode.insertBefore(this.#s,this.#t.nextSibling),this.#y(),this.#v(),this.#g(),this.#b(),this.server&&!this.liveServer?this.#u():this.resetSuggestions()}static init(e="select[multiple]",t={}){let s=document.querySelectorAll(e),o;for(let i=0;i<s.length;i++)s[i].dataset.tags||(o=new B(s[i],t),te.set(s[i],o))}static getInstance(e){if(te.has(e))return te.get(e)}dispose(){this.#t.dataset.tags=null,this.#t.style.display="block",this.#s.parentNode.removeChild(this.#s),this.parentForm.removeEventListener("reset",this.reset)}resetState(){this.isDisabled()?this.#s.setAttribute("readonly",""):this.#s.hasAttribute("readonly")&&this.#s.removeAttribute("readonly")}resetSuggestions(){let e=Array.from(this.#t.querySelectorAll("option")).filter(t=>!t.disabled).map(t=>({value:t.getAttribute("value"),label:t.innerText}));this.#f(e)}#u(e=!1){this.#a&&this.#a.abort(),this.#a=new AbortController,fetch(this.server+"?query="+encodeURIComponent(this.#e.value),{signal:this.#a.signal}).then(t=>t.json()).then(t=>{let s=t.data||t;this.#f(s),this.#a=null,e&&this.#d()}).catch(t=>{t.name!=="AbortError"&&console.error(t)})}#m(){if(this.#t.getAttribute("placeholder"))return this.#t.getAttribute("placeholder");if(this.#t.getAttribute("data-placeholder"))return this.#t.getAttribute("data-placeholder");let e=this.#t.querySelector("option");return e?e.value?"":e.innerText:""}#g(){this.#i.classList.add("dropdown-menu","p-0"),this.#i.style.maxHeight="280px",this.#i.style.overflowY="auto",this.#i.addEventListener("mouseenter",e=>{this.#r=!1})}#v(){this.#s.classList.add("form-control","dropdown"),this.isDisabled()&&this.#s.setAttribute("readonly",""),this.#p()===4&&(this.#s.style.height="auto")}#b(){this.#n.addEventListener("click",t=>{this.isDisabled()||this.#e.style.visibility!="hidden"&&this.#e.focus()});let e=this.#t.selectedOptions;for(let t=0;t<e.length;t++){let s=e[t];!s.value||(s.dataset.init=1,this.addItem(s.innerText,s.value))}}#y(){this.#e.type="text",this.#e.autocomplete="off",this.#e.style.backgroundColor="transparent",this.#e.style.border=0,this.#e.style.outline=0,this.#e.style.maxWidth="100%",this.#e.ariaLabel=this.searchLabel,this.isDisabled()&&this.#e.setAttribute("disabled",""),this.#l(),this.#e.addEventListener("input",e=>{this.#l(),this.#e.value.length>=this.suggestionsThreshold?this.liveServer?this.#u(!0):this.#d():this.#c()}),this.#e.addEventListener("focus",e=>{this.#e.value.length>=this.suggestionsThreshold&&this.#d()}),this.#e.addEventListener("focusout",e=>{this.#c()}),this.#e.addEventListener("keydown",e=>{let t=e.keyCode||e.key;if(this.separator.length&&this.separator.includes(e.key)){e.preventDefault(),this.addItem(this.#e.value,null)&&this.#h();return}switch(t){case 13:case"Enter":e.preventDefault();let s=this.getActiveSelection();s?s.click():this.allowNew&&!this.#S(this.#e.value)&&this.#e.value&&this.addItem(this.#e.value,null)&&this.#h();break;case 38:case"ArrowUp":e.preventDefault(),this.#r=!0;let o=this.#w();this.#e.value.length==0&&this.#i.classList.contains("show")&&!o&&this.#c();break;case 40:case"ArrowDown":e.preventDefault(),this.#r=!0,this.#E(),this.#e.value.length==0&&!this.#i.classList.contains("show")&&this.#d();break;case 8:case"Backspace":this.#e.value.length==0&&(this.removeLastItem(),this.#l(),this.#c());break}})}#w(){let e=this.getActiveSelection();if(e){let t=e.parentNode;do t=t.previousSibling;while(t&&t.style.display=="none");return t?(e.classList.remove(...b),t.querySelector("a").classList.add(...b),t.parentNode.scrollTop=t.offsetTop-t.parentNode.offsetTop,t):null}return null}#E(){let e=this.getActiveSelection(),t=null;if(e){t=e.parentNode;do t=t.nextSibling;while(t&&t.style.display=="none");return t?(e.classList.remove(...b),t.querySelector("a").classList.add(...b),t.offsetTop>t.parentNode.offsetHeight-t.offsetHeight&&(t.parentNode.scrollTop+=t.offsetHeight),t):null}return t}#l(){this.#e.value?this.#e.size=this.#e.value.length+1:this.getSelectedValues().length?(this.#e.placeholder="",this.#e.size=1):(this.#e.size=this.placeholder.length>0?this.placeholder.length:1,this.#e.placeholder=this.placeholder)}#f(e=null){for(;this.#i.lastChild;)this.#i.removeChild(this.#i.lastChild);for(let t=0;t<e.length;t++){let s=e[t];if(!s.value)continue;let o=document.createElement("li"),i=document.createElement("a");if(o.append(i),i.classList.add("dropdown-item"),i.setAttribute(C,s.value),i.setAttribute("href","#"),i.innerText=s.label,s.data)for(let[l,r]of Object.entries(s.data))i.dataset[l]=r;this.#i.appendChild(o),i.addEventListener("mouseenter",l=>{this.#r||(this.removeActiveSelection(),o.querySelector("a").classList.add(...b))}),i.addEventListener("mousemove",l=>{this.#r=!1}),i.addEventListener("mousedown",l=>{l.preventDefault()}),i.addEventListener("click",l=>{l.preventDefault(),this.addItem(i.innerText,i.getAttribute(C),i.dataset),this.#h()})}}reset(){this.removeAll(),this.#o=!1;let e=this.#t.querySelectorAll("option[data-init]");for(let t=0;t<e.length;t++){let s=e[t];this.addItem(s.innerText,s.value)}this.#l(),this.#o=!0}#h(){this.#e.value="",this.#l(),this.#c(),this.#e.dispatchEvent(new Event("input")),this.max&&this.getSelectedValues().length===this.max?this.#e.style.visibility="hidden":this.#e.style.visibility=="hidden"&&(this.#e.style.visibility="visible")}inputVisible(){return this.#e.style.visibility!="hidden"}getSelectedValues(){let e=this.#t.querySelectorAll("option[selected]");return Array.from(e).map(t=>t.value)}#d(){if(!this.inputVisible())return;this.#i.classList.contains("show")||this.#i.classList.add("show"),this.#i.style.left=this.#e.offsetLeft+"px";let e=this.#e.value.toLocaleLowerCase(),t=this.getSelectedValues(),s=this.#i.querySelectorAll("li"),o=!1,i=null,l=!1;for(let r=0;r<s.length;r++){let c=s[r],h=c.innerText.toLocaleLowerCase(),a=c.querySelector("a");if(a.classList.remove(...b),t.indexOf(a.getAttribute(C))!=-1){c.style.display="none";continue}l=!0;let f=e.length===0||h.indexOf(e)!==-1;this.showAllSuggestions||this.suggestionsThreshold===0||f?(c.style.display="list-item",o=!0,!i&&f&&(i=c)):c.style.display="none"}o||this.#i.classList.remove("show"),i?(this.#s.classList.contains("is-invalid")&&this.#s.classList.remove("is-invalid"),i.querySelector("a").classList.add(...b),i.parentNode.scrollTop=i.offsetTop-i.parentNode.offsetTop):!this.allowNew&&!(e.length===0&&!l)?this.#s.classList.add("is-invalid"):this.validationRegex&&this.#s.classList.contains("is-invalid")&&this.#s.classList.remove("is-invalid")}#c(){this.#i.classList.contains("show")&&this.#i.classList.remove("show"),this.#s.classList.contains("is-invalid")&&this.#s.classList.remove("is-invalid"),this.removeActiveSelection()}#p(){let e=5;return window.jQuery&&$.fn.tooltip!=null&&$.fn.tooltip.Constructor!=null&&(e=parseInt($.fn.tooltip.Constructor.VERSION.charAt(0))),e}#S(e){let t=Array.from(this.#t.querySelectorAll("option")).find(s=>s.textContent==e);return!!(t&&t.getAttribute("selected"))}#L(e){return new RegExp(this.validationRegex.trim()).test(e)}getActiveSelection(){return this.#i.querySelector("a."+Me)}removeActiveSelection(){let e=this.getActiveSelection();e&&e.classList.remove(...b)}removeAll(){this.#n.querySelectorAll("span").forEach(t=>{this.removeLastItem(!0)})}removeLastItem(e){e&&(this.#o=!1);let t=this.#n.querySelectorAll("span");if(!t.length)return;let s=t[t.length-1];this.removeItem(s.getAttribute(C)),this.#o=!0}isDisabled(){return this.#t.hasAttribute("disabled")||this.#t.hasAttribute("readonly")}addItem(e,t=null,s={}){if(t||(t=e),this.max&&this.getSelectedValues().length>=this.max)return!1;if(this.validationRegex&&!this.#L(e))return this.#s.classList.add("is-invalid"),!1;let o=this.#p(),i=this.#t.querySelector('option[value="'+t+'"]');i&&(s=i.dataset);let l=e,r=document.createElement("span"),c=["badge"],h=this.badgeStyle;if(s.badgeStyle&&(h=s.badgeStyle),s.badgeClass&&c.push(s.badgeClass),o===5?c=[...c,"me-2","bg-"+h]:c=[...c,"mr-2","badge-"+h],r.classList.add(...c),r.setAttribute(C,t),this.allowClear&&(l=(o===5?'<button type="button" style="font-size:0.65em" class="me-2 float-start btn-close btn-close-white" aria-label="'+this.clearLabel+'"></button>':'<button type="button" style="font-size:1em;float:left;text-shadow:none;color:currentColor;transform:scale(1.2)" class="mr-2 close" aria-label="'+this.clearLabel+'"><span aria-hidden="true">&times;</span></button>')+l),r.innerHTML=l,this.#n.insertBefore(r,this.#e),this.allowClear&&r.querySelector("button").addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),this.isDisabled()||(this.removeItem(t),document.activeElement.blur(),this.#l()),this.#t.hasAttribute("multiple")||this.#e.focus()}),!i){i=document.createElement("option"),i.value=t,i.innerText=e;for(let[a,f]of Object.entries(s))i.dataset[a]=f;this.#t.appendChild(i)}return i.setAttribute("selected","selected"),i.selected=!0,this.#o&&this.#t.dispatchEvent(new Event("change"),{bubbles:!0}),!0}removeItem(e){let t=this.#n.querySelector("span["+C+'="'+e+'"]');if(!t)return;t.remove();let s=this.#t.querySelector('option[value="'+e+'"]');s&&(s.removeAttribute("selected"),s.selected=!1,this.#o&&this.#t.dispatchEvent(new Event("change"),{bubbles:!0})),this.#e.style.visibility=="hidden"&&this.max&&this.getSelectedValues().length<this.max&&(this.#e.style.visibility="visible")}},ye=B;var Ht=ye;export{Ht as default};
//# sourceMappingURL=tags-standalone.min.js.map
